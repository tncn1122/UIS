(this["webpackJsonpcode-tour-frontend"]=this["webpackJsonpcode-tour-frontend"]||[]).push([[14],{581:function(e,t,n){"use strict";n(0);var c=n(596),a=n.n(c),s=n(604),i=n.n(s),r=n(606),l=n.n(r),o=(n(607),n(626),n(589),n(608),n(6));window.katex=l.a;var u={syntax:{highlight:function(e){return a.a.highlightAuto(e).value}},clipboard:{matchVisual:!1}},m=["header","font","size","bold","italic","underline","strike","blockquote","script","formula","code-block","list","bullet","indent","link","image","video","align","height","width","class","style","color","background"];t.a=function(e){var t=e.htmlData;return Object(o.jsx)(i.a,{value:t,readOnly:!0,theme:"bubble",modules:u,formats:m})}},589:function(e,t,n){},918:function(e,t,n){},919:function(e,t,n){e.exports={comment:"style_comment__1euBE"}},921:function(e,t,n){e.exports={comments:"style_comments__2RBEY"}},922:function(e,t,n){e.exports={news:"style_news__2RLET"}},976:function(e,t,n){"use strict";n.r(t);n(83);var c=n(33),a=(n(122),n(51)),s=(n(136),n(39)),i=(n(595),n(594)),r=n(46),l=n(0),o=n(52),u=n(36),m=n(47),d=n(8),j=n(219),b=n(11),h=n.p+"static/media/comment-outline.5a66b682.svg",O=n(274),p=n(275),f=n(276),x=n.p+"static/media/eye.52b08830.svg",g=(n(315),n(146)),v=(n(573),n(572)),y=(n(216),n(140)),k=n(41),w=n(593),I=(n(571),n(570)),N=(n(189),n(137)),S=n(73),C=n.n(S),L=n(596),R=n.n(L),T=n(604),z=n.n(T),_=n(913),D=n(606),E=n.n(D),A=n(914),U=n.n(A),V=n(915),F=n.n(V),H=n(916),M=n.n(H),P=(n(607),n(917),n(918),n(608),n(6));window.katex=E.a,T.Quill.register({"modules/ImageResize":U.a,"modules/imageDrop":_.a,"modules/htmlEditButton":M.a,"modules/VideoResize":F.a});var q={syntax:{highlight:function(e){return R.a.highlightAuto(e).value}},toolbar:[[{font:[]},{size:[]}],[{color:[]},{background:[]},"bold","italic","underline","strike"],["blockquote","code-block",{script:"sub"},{script:"super"},"formula"],[{align:[]},{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"]],htmlEditButton:{buttonHTML:"HTML",okText:"Ok",cancelText:"Cancel"},ImageResize:{modules:["Resize","DisplaySize","Toolbar"]},VideoResize:{modules:["Resize","DisplaySize","Toolbar"],tagName:"iframe"},imageDrop:!0,clipboard:{matchVisual:!1}},B=["header","font","size","bold","italic","underline","strike","blockquote","script","formula","color","background","code-block","list","bullet","indent","link","image","video","align","height","width","class","style"],J=function(e){var t=e.onChange,n=e.value,c=e.readOnly;return Object(P.jsx)(z.a,{theme:"snow",value:n||"",formats:B,modules:c?{toolbar:!1}:q,onChange:t,readOnly:c})};J.defaultProps={readOnly:!1};var G=J,Q=(n(955),n(920)),Y=(n(192),n(71)),K=n(106),W=n.n(K),X=(n(581),n.p+"static/media/comment-reply.3dfa4dd2.svg"),Z=n(956),$=n(957),ee=n(919),te=n.n(ee),ne=function(e){var t=e.commentData,n=e.newsId,a=e.replies,s=e.handleReplySuccess,i=I.a.useForm(),o=Object(r.a)(i,1)[0],u=Object(l.useState)(t),m=Object(r.a)(u,2),d=m[0],h=(m[1],Object(l.useState)(d.countLikes?d.countLikes:0)),O=Object(r.a)(h,2),p=O[0],f=O[1],x=Object(l.useState)(!!d.isLiked&&d.isLiked),g=Object(r.a)(x,2),v=g[0],y=g[1],k=Object(l.useState)(!1),w=Object(r.a)(k,2),N=w[0],S=w[1],C=[Object(P.jsx)(Y.a,{title:"Like",children:Object(P.jsxs)("span",{onClick:function(){v?j.a.deleteCommentLike(n,d.id).then((function(e){f((function(e){return e-1})),y(!1)})).catch((function(e){b.c.http(e)})):j.a.postCommentLike(n,d.id).then((function(e){f((function(e){return e+1})),y(!0)})).catch((function(e){b.c.http(e)}))},children:[Object(l.createElement)(v?Z.a:$.a),Object(P.jsxs)("span",{className:"comment-action",children:["\xa0",p]})]})},"comment-basic-like"),Object(P.jsxs)("span",{onClick:function(){S(!N)},children:[Object(P.jsx)("img",{alt:"commentReply",src:X}),"\xa0\xa0Tr\u1ea3 l\u1eddi"]},"comment-basic-reply-to")];return Object(P.jsxs)(Q.a,{className:te.a.comment,actions:C,author:d.user.username,avatar:d.user.userProfile?b.f.buildAvatarURL(d.user.userProfile.avatar):b.f.buildAvatarURL(),content:Object(P.jsx)("div",{dangerouslySetInnerHTML:{__html:d.text}}),datetime:W()(d.createdAt).fromNow(),children:[a,N?Object(P.jsx)("div",{children:Object(P.jsxs)(I.a,{onFinish:function(e){var t=d.newsCommentParentId?d.newsCommentParentId:d.id;j.a.postCommentReply(n,t,{text:e.replyData}).then((function(e){o.resetFields(),S(!1),s(e)})).catch((function(e){b.c.http(e)}))},form:o,children:[Object(P.jsx)(I.a.Item,{name:"replyData",children:Object(P.jsx)(G,{placeholder:"Tr\u1ea3 l\u1eddi b\xecnh lu\u1eadn"})}),Object(P.jsx)(I.a.Item,{className:"reply-action",children:Object(P.jsx)(c.a,{type:"primary",size:"small",htmlType:"submit",children:"Tr\u1ea3 l\u1eddi"})})]})}):""]})},ce=n(921),ae=n.n(ce),se=(N.a.TextArea,Object(o.c)((function(e){return{currentUser:e.authReducer.currentUser}}))((function(e){var t=I.a.useForm(),n=Object(r.a)(t,1)[0],a=e.newsId,s=e.currentUser,i=Object(l.useState)([]),o=Object(r.a)(i,2),u=o[0],m=o[1],h=Object(l.useState)(1),O=Object(r.a)(h,2),p=O[0],f=(O[1],Object(l.useState)(0)),x=Object(r.a)(f,2),N=(x[0],x[1]);Object(l.useEffect)((function(){!function(){var e={page:p};j.a.getComments(a,e).then((function(e){m(e.results),N(e.total)}))}()}),[]);var S=function(e){e.user=s;var t=C.a.find(u,(function(t){return t.id===e.newsCommentParentId})),n=Object(w.a)(t.replies);n.push(e),t.replies=n;var c=C.a.findIndex(u,{id:t.id}),a=Object(w.a)(u);a.splice(c,1,t),m(a)};return Object(P.jsxs)("div",{className:ae.a.comments,children:[Object(P.jsxs)(I.a,{className:"input-comment",onFinish:function(e){j.a.postComment(a,{text:e.commentData}).then((function(e){n.resetFields(),e.replies=[],m([Object(k.a)(Object(k.a)({},e),{},{user:s})].concat(Object(w.a)(u)))})).catch((function(e){b.c.http(e)}))},form:n,children:[Object(P.jsx)(I.a.Item,{name:"commentData",children:Object(P.jsx)(G,{placeholder:"Vi\u1ebft b\xecnh lu\u1eadn"})}),Object(P.jsx)("div",{className:"ta-right",children:Object(P.jsxs)(y.b,{children:[Object(P.jsx)(c.a,{type:"cancel",children:d.k.CANCEL}),Object(P.jsx)(c.a,{type:"primary",size:"large",htmlType:"submit",children:d.k.SAVE})]})})]}),Object(P.jsx)(v.a,{}),Object(P.jsx)("h3",{children:"COMMENTS"}),Object(P.jsx)(v.a,{}),Object(P.jsx)(g.b,{className:"comment-list",itemLayout:"horizontal",dataSource:u,renderItem:function(e){return Object(P.jsx)(ne,{newsId:a,commentData:e,handleReplySuccess:S,replies:e.replies&&null!=e.replies&&e.replies.length>0?Object(P.jsx)(g.b,{className:"comment-list",itemLayout:"horizontal",dataSource:e.replies,renderItem:function(e){return Object(P.jsx)(ne,{commentData:e,newsId:a,handleReplySuccess:S},e.id)}}):""},e.id)}})]})}))),ie=n(922),re=n.n(ie);t.default=Object(o.c)((function(e){return{currentUser:e.authReducer.currentUser}}))((function(e){var t=Object(l.useState)([]),n=Object(r.a)(t,2),o=n[0],g=n[1],v=Object(l.useState)(0),y=Object(r.a)(v,2),k=y[0],w=y[1],I=Object(u.h)().newsId,N=e.currentUser;Object(l.useEffect)((function(){return C(I),S(),function(){}}),[]);var S=function(){j.a.postCommentView(I)},C=function(e){j.a.getNewsDetails(e).then((function(e){g(e),w(e.countViews)})).catch((function(e){b.c.http(e)}))};return Object(P.jsxs)("div",{className:re.a.news,children:[Object(P.jsxs)(i.a,{className:"breadcrumb",separator:">",children:[Object(P.jsx)(i.a.Item,{href:"/",children:"Home"}),Object(P.jsx)(i.a.Item,{href:"/news",children:"Tin t\u1ee9c"}),Object(P.jsx)(i.a.Item,{children:o.title})]}),Object(P.jsxs)("div",{className:"post",children:[Object(P.jsx)("h2",{className:"title",children:o.title}),Object(P.jsx)("h5",{className:"time",children:o.updatedAt}),Object(P.jsx)("div",{className:"post__main mb-50",dangerouslySetInnerHTML:{__html:o.htmlContent}})]}),Object(P.jsxs)(a.a,{className:"footer",children:[Object(P.jsxs)(s.a,{span:20,children:[Object(P.jsx)("img",{alt:"comment",src:h}),o.countComments,Object(P.jsx)("img",{alt:"view",src:x}),k]}),Object(P.jsxs)(s.a,{span:4,style:{paddingRight:5},children:[Object(P.jsx)("img",{alt:"facebook",src:O.a}),Object(P.jsx)("img",{alt:"instagram",src:p.a}),Object(P.jsx)("img",{alt:"linkedin",src:f.a})]})]}),N?Object(P.jsx)(se,{newsId:I}):Object(P.jsx)("div",{className:"require-login",children:Object(P.jsx)(m.a,{to:d.g.AUTH.LOGIN,children:Object(P.jsx)(c.a,{type:"primary",children:"Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 b\xecnh lu\u1eadn"})})})]})}))}}]);
//# sourceMappingURL=14.123bf910.chunk.js.map