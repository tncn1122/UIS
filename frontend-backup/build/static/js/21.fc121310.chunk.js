(this["webpackJsonpcode-tour-frontend"]=this["webpackJsonpcode-tour-frontend"]||[]).push([[21],{575:function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));var n=c(30),a=c(31),s=c(11),i=c(8),o=c(27),r=function(){function e(){Object(n.a)(this,e)}return Object(a.a)(e,null,[{key:"getCategories",value:function(e){var t=s.f.buildBeURL(i.b.FORUM.BASE,i.b.FORUM.PATH.CATEGORIES);return o.a.get(t,e)}},{key:"getForumDetails",value:function(e){var t=s.f.buildBeURL(i.b.FORUM.BASE,"".concat(i.b.FORUM.PATH.FORUMS,"/").concat(e));return o.a.get(t)}},{key:"getTopicDetails",value:function(e){var t=s.f.buildBeURL(i.b.FORUM.BASE,"".concat(i.b.FORUM.PATH.TOPICS,"/").concat(e));return o.a.get(t)}},{key:"getTopicsByForum",value:function(e,t){var c=s.f.buildBeURL(i.b.FORUM.BASE,"".concat(i.b.FORUM.PATH.FORUMS,"/").concat(t).concat(i.b.FORUM.PATH.TOPICS));return o.a.get(c,e)}},{key:"getPostsByTopic",value:function(e,t){var c=s.f.buildBeURL(i.b.FORUM.BASE,"".concat(i.b.FORUM.PATH.TOPICS,"/").concat(t).concat(i.b.FORUM.PATH.POSTS));return o.a.get(c,e)}},{key:"postPost",value:function(e,t){var c=s.f.buildBeURL(i.b.FORUM.BASE,"".concat(i.b.FORUM.PATH.TOPICS,"/").concat(e).concat(i.b.FORUM.PATH.POSTS));return o.a.post(c,t)}},{key:"createTopic",value:function(e,t){var c=s.f.buildBeURL(i.b.FORUM.BASE,"".concat(i.b.FORUM.PATH.FORUMS,"/").concat(e).concat(i.b.FORUM.PATH.TOPICS));return o.a.post(c,t)}},{key:"postTopicView",value:function(e){var t=s.f.buildBeURL(i.b.FORUM.BASE,"".concat(i.b.FORUM.PATH.TOPICS,"/").concat(e,"/views"));return o.a.post(t)}},{key:"postPostLike",value:function(e){var t=s.f.buildBeURL(i.b.FORUM.BASE,"".concat(i.b.FORUM.PATH.POSTS,"/").concat(e,"/likes"));return o.a.post(t,{isLike:!0})}},{key:"postPostDislike",value:function(e){var t=s.f.buildBeURL(i.b.FORUM.BASE,"".concat(i.b.FORUM.PATH.POSTS,"/").concat(e,"/likes"));return o.a.post(t,{isLike:!1})}},{key:"deletePostLikeDislike",value:function(e){var t=s.f.buildBeURL(i.b.FORUM.BASE,"".concat(i.b.FORUM.PATH.POSTS,"/").concat(e,"/likes"));return o.a.delete(t)}}]),e}()},590:function(e,t,c){"use strict";t.a=c.p+"static/media/comment.5f49da4a.svg"},591:function(e,t,c){"use strict";t.a=c.p+"static/media/arrow-next.58fc74a6.svg"},592:function(e,t,c){"use strict";t.a=c.p+"static/media/arrow-previous.ed8201ba.svg"},934:function(e,t,c){e.exports={"topic-detail___card":"style_topic-detail___card__NPDRp"}},935:function(e,t,c){e.exports={"topic-detail":"style_topic-detail__3J93f"}},982:function(e,t,c){"use strict";c.r(t);c(314);var n=c(218),a=(c(83),c(33)),s=(c(595),c(594)),i=c(41),o=c(593),r=c(46),u=c(0),l=c(52),b=c(928),O=c(931),j=c.n(O),d=c(36),f=c(8),p=c(575),m=c(590),h=c(591),v=c(592),S=(c(122),c(51)),R=(c(136),c(39)),U=c(128),P=c(106),k=c.n(P),g=c(956),x=c(957),T=c(984),F=c(985),M=c(5),A=c.n(M),L=c(11),B=c(934),N=c.n(B),_=c(6);function y(e){var t=e.post,c=e.className,n=Object(u.useState)(!1),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(u.useState)(t.countLikes?t.countLikes:0),l=Object(r.a)(o,2),b=l[0],O=l[1],j=Object(u.useState)(t.countDislikes?t.countDislikes:0),d=Object(r.a)(j,2),f=d[0],m=d[1],h=Object(u.useState)(!!t.isLiked&&t.isLiked),v=Object(r.a)(h,2),P=v[0],M=v[1],B=Object(u.useState)(!!t.isDisliked&&t.isDisliked),y=Object(r.a)(B,2),E=y[0],C=y[1];return Object(_.jsxs)(S.a,{span:24,className:A()(N.a["topic-detail___card"],c,Object(U.a)({},N.a.owner,"owner"===t.type)),children:[Object(_.jsxs)(R.a,{span:4,className:"topic__user",children:[Object(_.jsx)("img",{src:t.user.userProfile?L.f.buildAvatarURL(t.user.userProfile.avatar):L.f.buildAvatarURL(),alt:""}),Object(_.jsx)("div",{className:"username",children:"@".concat(t.user.username.toLowerCase())}),Object(_.jsx)("div",{className:"fullname",children:t.user.userProfile&&t.user.userProfile.full_name?t.user.userProfile.full_name:t.user.username}),Object(_.jsxs)("div",{className:"count-posts",children:["Post: ",t.user.countPosts]})]}),Object(_.jsxs)(R.a,{span:19,className:"post",children:[Object(_.jsx)("div",{className:"time",children:k()(t.createdAt).fromNow()}),Object(_.jsx)("div",{className:"content",dangerouslySetInnerHTML:{__html:t.htmlContent}}),Object(_.jsx)("div",{className:"bottom",children:Object(_.jsxs)("div",{className:"btn-group",children:[Object(_.jsxs)("span",{className:"like",onClick:function(){P?p.a.deletePostLikeDislike(t.id).then((function(e){O((function(e){return e-1})),M(!1)})).catch((function(e){L.c.http(e)})):p.a.postPostLike(t.id).then((function(e){O((function(e){return e+1})),M(!0),E&&(C(!1),m((function(e){return e-1})))})).catch((function(e){L.c.http(e)}))},children:[Object(u.createElement)(P?g.a:x.a),"\xa0 ",b]}),Object(_.jsxs)("span",{className:"dislike",onClick:function(){E?p.a.deletePostLikeDislike(t.id).then((function(e){m((function(e){return e-1})),C(!1)})).catch((function(e){L.c.http(e)})):p.a.postPostDislike(t.id).then((function(e){m((function(e){return e+1})),C(!0),P&&(M(!1),O((function(e){return e-1})))})).catch((function(e){L.c.http(e)}))},children:[Object(u.createElement)(E?T.a:F.a),"\xa0 ",f]}),Object(_.jsx)("span",{className:"btn-reply",onClick:function(){return i(!s)},children:"Tr\u1ea3 l\u1eddi"})]})})]})]})}var E=c(935),C=c.n(E),H=function(e,t,c){return"prev"===t?Object(_.jsx)("img",{alt:"previous",src:v.a}):"next"===t?Object(_.jsx)("img",{alt:"next",src:h.a}):c};t.default=Object(l.c)((function(e){return{currentUser:e.authReducer.currentUser}}))((function(e){var t=Object(u.useState)(""),c=Object(r.a)(t,2),l=c[0],O=c[1],h=Object(u.useState)(""),v=Object(r.a)(h,2),S=v[0],R=v[1],U=Object(u.useState)(0),P=Object(r.a)(U,2),k=P[0],g=P[1],x=Object(u.useState)([]),T=Object(r.a)(x,2),F=T[0],M=T[1],A=Object(u.useState)(1),L=Object(r.a)(A,2),B=L[0],N=L[1],E=Object(u.useState)(0),D=Object(r.a)(E,2),I=D[0],w=D[1],z=Object(u.useState)(""),J=Object(r.a)(z,2),V=J[0],G=J[1],K=Object(d.h)().topicId,q=e.currentUser;Object(u.useEffect)((function(){!function(){var e={page:B,pageSize:f.j.FORUM_POST.pageSize};p.a.getPostsByTopic(e,K).then((function(e){M(e.results),w(e.total)}))}()}),[B]),Object(u.useEffect)((function(){p.a.postTopicView(K),p.a.getTopicDetails(K).then((function(e){R(e.title),p.a.getForumDetails(e.forumId).then((function(e){G(e.name),g(e.id)}))}))}),[]),Object(u.useEffect)((function(){}),[]);var Q=function(){var e=l;p.a.postPost(K,{htmlContent:e}).then((function(e){M([].concat(Object(o.a)(F),[Object(i.a)(Object(i.a)({},e),{},{user:q})])),console.log("Success post: ",e)}))};return Object(_.jsxs)("div",{className:C.a["topic-detail"],children:[Object(_.jsxs)(s.a,{className:"breadcrumb",separator:">",children:[Object(_.jsx)(s.a.Item,{href:"/",children:f.r.HOME}),Object(_.jsx)(s.a.Item,{href:"/forums",children:f.r.FORUM}),Object(_.jsx)(s.a.Item,{href:"/forums/".concat(k),children:V}),Object(_.jsx)(s.a.Item,{children:S})]}),F.map((function(e){return Object(_.jsx)(y,{className:"topic-detail__item",post:e},e.id)})),Object(_.jsx)("div",{className:"suggestion",children:Object(_.jsxs)("div",{className:"create-post",children:[Object(_.jsx)(b.CKEditor,{editor:j.a,data:l,onChange:function(e,t){return O(t.getData())},onReady:function(e){e.editing.view.change((function(t){t.setStyle("height","50px",e.editing.view.document.getRoot())}))},onSubmit:Q}),Object(_.jsxs)("div",{className:"btn-group",children:[Object(_.jsx)(a.a,{type:"text",className:"button-inactive",children:"Cancel"}),Object(_.jsxs)(a.a,{type:"text",className:"button-active",onClick:Q,children:[Object(_.jsx)("img",{alt:"comment",src:m.a}),"Tr\u1ea3 l\u1eddi"]})]})]})}),Object(_.jsx)("div",{className:"pagination",children:Object(_.jsx)(n.a,{total:I,simple:!0,current:B,pageSize:f.j.FORUM_POST.pageSize,onChange:function(e){N(e)},itemRender:H})})]})}))}}]);
//# sourceMappingURL=21.fc121310.chunk.js.map